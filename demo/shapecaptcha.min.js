!function(x,y){"object"==typeof exports&&"object"==typeof module?module.exports=y():"function"==typeof define&&define.amd?define([],y):"object"==typeof exports?exports.ShapeCaptcha=y():x.ShapeCaptcha=y()}(this,function(){return function(x){function y(e){if(t[e])return t[e].exports;var n=t[e]={exports:{},id:e,loaded:!1};return x[e].call(n.exports,n,n.exports,y),n.loaded=!0,n.exports}var t={};return y.m=x,y.c=t,y.p="",y(0)}([function(x,y,t){"use strict";function e(x){return x&&x.__esModule?x:{default:x}}function n(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function i(x){var y={timeout:30,items:5,container:"#foobar",bgColor:"black",drawColor:"#FFFF00",acceptColor:"#00FF00",textColor:"black",textBgColor:"#CCC",text:"",drawLineWidth:4,successLineWidth:8},t=Object.assign({},y,x),e=new c(t);return new Promise(e.run)}Object.defineProperty(y,"__esModule",{value:!0}),y.init=i;var o=t(1),s=e(o),r=t(2),a=e(r),h=t(3),u=e(h),c=function x(y){n(this,x),this.options=y;var t=(0,s.default)();this.shapeDetector=new t(t.defaultShapes,{nbSamplePoints:128,threshold:.8}),this.run=a.default.bind(this);var e=!0,i=!1,o=void 0;try{for(var r,h=Object.keys(u.default)[Symbol.iterator]();!(e=(r=h.next()).done);e=!0){var c=r.value;this[c]=u.default[c].bind(this)}}catch(x){i=!0,o=x}finally{try{!e&&h.return&&h.return()}finally{if(i)throw o}}}},function(x,y){"use strict";function t(){function x(x){return x*Math.PI/180}function y(x,y){var t=y.x-x.x,e=y.y-x.y;return Math.sqrt(t*t+e*e)}function t(x,y){this.points=x,this.name=y,this.processStroke()}function e(x,y){y=y||{},this.threshold=y.threshold||0,n=y.nbSamplePoints||64,this.patterns=[];for(var t=0;t<x.length;t++)this.learn(x[t].name,x[t].points)}var n,i=250,o=.5*(-1+Math.sqrt(5)),s=x(45),r=x(2),a=.5*Math.sqrt(i*i+i*i),h={x:0,y:0};return t.prototype.processStroke=function(){return this.points=this.resample(),this.setCentroid(),this.points=this.rotateBy(-this.indicativeAngle()),this.points=this.scaleToSquare(),this.setCentroid(),this.points=this.translateToOrigin(),this},t.prototype.resample=function(){for(var x,t,e=this.strokeLength()/(n-1),i=0,o=[this.points[0]],s=1;s<this.points.length;s++)x=y(this.points[s-1],this.points[s]),i+x>=e?(t={x:this.points[s-1].x+(e-i)/x*(this.points[s].x-this.points[s-1].x),y:this.points[s-1].y+(e-i)/x*(this.points[s].y-this.points[s-1].y)},o.push(t),this.points.splice(s,0,t),i=0):i+=x;return o.length===n-1&&o.push(this.points[this.points.length-1]),o},t.prototype.rotateBy=function(x){for(var y,t=Math.cos(x),e=Math.sin(x),n=[],i=0;i<this.points.length;i++)y=this.points[i],n.push({x:(y.x-this.c.x)*t-(y.y-this.c.y)*e+this.c.x,y:(y.x-this.c.x)*e+(y.y-this.c.y)*t+this.c.y});return n},t.prototype.scaleToSquare=function(){for(var x,y=[],t={minX:+(1/0),maxX:-(1/0),minY:+(1/0),maxY:-(1/0)},e=0;e<this.points.length;e++)x=this.points[e],t.minX=Math.min(t.minX,x.x),t.minY=Math.min(t.minY,x.y),t.maxX=Math.max(t.maxX,x.x),t.maxY=Math.max(t.maxY,x.y);for(t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,e=0;e<this.points.length;e++)x=this.points[e],y.push({x:x.x*(i/t.width),y:x.y*(i/t.height)});return y},t.prototype.translateToOrigin=function(){for(var x,y=[],t=0;t<this.points.length;t++)x=this.points[t],y.push({x:x.x+h.x-this.c.x,y:x.y+h.y-this.c.y});return y},t.prototype.setCentroid=function(){var x;this.c={x:0,y:0};for(var y=0;y<this.points.length;y++)x=this.points[y],this.c.x+=x.x,this.c.y+=x.y;return this.c.x/=this.points.length,this.c.y/=this.points.length,this},t.prototype.indicativeAngle=function(){return Math.atan2(this.c.y-this.points[0].y,this.c.x-this.points[0].x)},t.prototype.strokeLength=function(){for(var x=0,t=1;t<this.points.length;t++)x+=y(this.points[t-1],this.points[t]);return x},t.prototype.distanceAtBestAngle=function(x){for(var y=-s,t=s,e=o*y+(1-o)*t,n=this.distanceAtAngle(x,e),i=(1-o)*y+o*t,a=this.distanceAtAngle(x,i);Math.abs(t-y)>r;)n<a?(t=i,i=e,a=n,e=o*y+(1-o)*t,n=this.distanceAtAngle(x,e)):(y=e,e=i,n=a,i=(1-o)*y+o*t,a=this.distanceAtAngle(x,i));return Math.min(n,a)},t.prototype.distanceAtAngle=function(x,t){for(var e=this.rotateBy(t),n=x.points,i=0,o=0;o<e.length;o++)i+=y(e[o],n[o]);return i/e.length},e.defaultShapes=[{points:[{x:140.17500305175776,y:420.52500915527327},{x:157.69687843322748,y:385.4812583923338},{x:175.2187538146972,y:350.4375076293944},{x:192.7406291961669,y:315.39375686645496},{x:210.26250457763663,y:280.3500061035155},{x:227.78437995910636,y:245.30625534057606},{x:245.30625534057606,y:210.26250457763663},{x:262.8281307220458,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:297.87188148498524,y:175.2187538146972},{x:315.39375686645496,y:210.26250457763663},{x:332.9156322479247,y:245.30625534057606},{x:350.4375076293944,y:280.3500061035155},{x:367.95938301086414,y:315.39375686645496},{x:385.4812583923338,y:350.4375076293944},{x:403.00313377380354,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327}],name:"triangle"},{points:[{x:280.3500061035155,y:140.17500305175776},{x:297.87188148498524,y:175.2187538146972},{x:315.39375686645496,y:210.26250457763663},{x:332.9156322479247,y:245.30625534057606},{x:350.4375076293944,y:280.3500061035155},{x:367.95938301086414,y:315.39375686645496},{x:385.4812583923338,y:350.4375076293944},{x:403.00313377380354,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:157.69687843322748,y:385.4812583923338},{x:175.2187538146972,y:350.4375076293944},{x:192.7406291961669,y:315.39375686645496},{x:210.26250457763663,y:280.3500061035155},{x:227.78437995910636,y:245.30625534057606},{x:245.30625534057606,y:210.26250457763663},{x:262.8281307220458,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776}],name:"triangle"},{points:[{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:157.69687843322748,y:385.4812583923338},{x:175.2187538146972,y:350.4375076293944},{x:192.7406291961669,y:315.39375686645496},{x:210.26250457763663,y:280.3500061035155},{x:227.78437995910636,y:245.30625534057606},{x:245.30625534057606,y:210.26250457763663},{x:262.8281307220458,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:297.87188148498524,y:175.2187538146972},{x:315.39375686645496,y:210.26250457763663},{x:332.9156322479247,y:245.30625534057606},{x:350.4375076293944,y:280.3500061035155},{x:367.95938301086414,y:315.39375686645496},{x:385.4812583923338,y:350.4375076293944},{x:403.00313377380354,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327}],name:"triangle"},{points:[{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:403.00313377380354,y:385.4812583923338},{x:385.4812583923338,y:350.4375076293944},{x:367.9593830108641,y:315.39375686645496},{x:350.4375076293944,y:280.3500061035155},{x:332.9156322479247,y:245.30625534057606},{x:315.39375686645496,y:210.26250457763663},{x:297.87188148498524,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:262.8281307220458,y:175.2187538146972},{x:245.30625534057606,y:210.26250457763663},{x:227.78437995910636,y:245.30625534057606},{x:210.26250457763663,y:280.3500061035155},{x:192.7406291961669,y:315.39375686645496},{x:175.2187538146972,y:350.4375076293944},{x:157.69687843322748,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327}],name:"triangle"},{points:[{x:420.52500915527327,y:420.52500915527327},{x:403.00313377380354,y:385.4812583923338},{x:385.4812583923338,y:350.4375076293944},{x:367.9593830108641,y:315.39375686645496},{x:350.4375076293944,y:280.3500061035155},{x:332.9156322479247,y:245.30625534057606},{x:315.39375686645496,y:210.26250457763663},{x:297.87188148498524,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:262.8281307220458,y:175.2187538146972},{x:245.30625534057606,y:210.26250457763663},{x:227.78437995910636,y:245.30625534057606},{x:210.26250457763663,y:280.3500061035155},{x:192.7406291961669,y:315.39375686645496},{x:175.2187538146972,y:350.4375076293944},{x:157.69687843322748,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327}],name:"triangle"},{points:[{x:280.3500061035155,y:140.17500305175776},{x:262.8281307220458,y:175.2187538146972},{x:245.30625534057606,y:210.26250457763663},{x:227.78437995910636,y:245.30625534057606},{x:210.26250457763663,y:280.3500061035155},{x:192.7406291961669,y:315.39375686645496},{x:175.2187538146972,y:350.4375076293944},{x:157.69687843322748,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:403.00313377380354,y:385.4812583923338},{x:385.4812583923338,y:350.4375076293944},{x:367.9593830108641,y:315.39375686645496},{x:350.4375076293944,y:280.3500061035155},{x:332.9156322479247,y:245.30625534057606},{x:315.39375686645496,y:210.26250457763663},{x:297.87188148498524,y:175.2187538146972},{x:280.3500061035155,y:140.17500305175776}],name:"triangle"},{points:[{x:140.17500305175776,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:140.17500305175776}],name:"square"},{points:[{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776}],name:"square"},{points:[{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327}],name:"square"},{points:[{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327}],name:"square"},{points:[{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327}],name:"square"},{points:[{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327}],name:"square"},{points:[{x:420.52500915527327,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:140.17500305175776}],name:"square"},{points:[{x:140.17500305175776,y:140.17500305175776},{x:140.17500305175776,y:175.2187538146972},{x:140.17500305175776,y:210.26250457763663},{x:140.17500305175776,y:245.30625534057606},{x:140.17500305175776,y:280.3500061035155},{x:140.17500305175776,y:315.39375686645496},{x:140.17500305175776,y:350.4375076293944},{x:140.17500305175776,y:385.4812583923338},{x:140.17500305175776,y:420.52500915527327},{x:140.17500305175776,y:420.52500915527327},{x:175.2187538146972,y:420.52500915527327},{x:210.26250457763663,y:420.52500915527327},{x:245.30625534057606,y:420.52500915527327},{x:280.3500061035155,y:420.52500915527327},{x:315.39375686645496,y:420.52500915527327},{x:350.4375076293944,y:420.52500915527327},{x:385.4812583923338,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:420.52500915527327},{x:420.52500915527327,y:385.4812583923338},{x:420.52500915527327,y:350.4375076293944},{x:420.52500915527327,y:315.39375686645496},{x:420.52500915527327,y:280.3500061035155},{x:420.52500915527327,y:245.30625534057606},{x:420.52500915527327,y:210.26250457763663},{x:420.52500915527327,y:175.2187538146972},{x:420.52500915527327,y:140.17500305175776},{x:420.52500915527327,y:140.17500305175776},{x:385.4812583923338,y:140.17500305175776},{x:350.4375076293944,y:140.17500305175776},{x:315.39375686645496,y:140.17500305175776},{x:280.3500061035155,y:140.17500305175776},{x:245.30625534057606,y:140.17500305175776},{x:210.26250457763663,y:140.17500305175776},{x:175.2187538146972,y:140.17500305175776},{x:140.17500305175776,y:140.17500305175776}],name:"square"},{points:[{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:304.69113993790967},{x:412.07142208989444,y:328.29268073795373},{x:401.74511972189896,y:350.43750762939436},{x:387.73028825550034,y:370.4527612529582},{x:370.4527612529582,y:387.73028825550034},{x:350.4375076293944,y:401.74511972189896},{x:328.2926807379538,y:412.07142208989444},{x:304.69113993790967,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:256.0088722691214,y:418.3954358873965},{x:232.4073314690773,y:412.07142208989444},{x:210.26250457763666,y:401.74511972189896},{x:190.2472509540728,y:387.73028825550034},{x:172.9697239515307,y:370.4527612529582},{x:158.95489248513206,y:350.43750762939436},{x:148.62859011713658,y:328.2926807379538},{x:142.30457631963455,y:304.6911399379096},{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:256.00887226912135},{x:148.62859011713655,y:232.4073314690773},{x:158.9548924851321,y:210.2625045776366},{x:172.96972395153068,y:190.2472509540728},{x:190.24725095407277,y:172.9697239515307},{x:210.26250457763658,y:158.95489248513212},{x:232.40733146907718,y:148.62859011713658},{x:256.00887226912135,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:304.6911399379096,y:142.30457631963455},{x:328.2926807379537,y:148.62859011713653},{x:350.4375076293944,y:158.9548924851321},{x:370.4527612529582,y:172.96972395153068},{x:387.73028825550034,y:190.24725095407274},{x:401.7451197218989,y:210.26250457763658},{x:412.07142208989444,y:232.4073314690773},{x:418.39543588739645,y:256.00887226912124},{x:420.52500915527327,y:280.35000610351545}],name:"circle"},{points:[{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:256.00887226912135},{x:412.07142208989444,y:232.4073314690773},{x:401.74511972189896,y:210.26250457763666},{x:387.73028825550034,y:190.2472509540728},{x:370.4527612529582,y:172.96972395153068},{x:350.4375076293944,y:158.9548924851321},{x:328.2926807379538,y:148.62859011713658},{x:304.69113993790967,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:256.0088722691214,y:142.30457631963455},{x:232.4073314690773,y:148.62859011713655},{x:210.26250457763666,y:158.95489248513206},{x:190.2472509540728,y:172.96972395153068},{x:172.9697239515307,y:190.24725095407277},{x:158.95489248513206,y:210.26250457763666},{x:148.62859011713658,y:232.40733146907723},{x:142.30457631963455,y:256.0088722691214},{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:304.69113993790967},{x:148.62859011713655,y:328.29268073795373},{x:158.9548924851321,y:350.4375076293944},{x:172.96972395153068,y:370.4527612529582},{x:190.24725095407277,y:387.73028825550034},{x:210.26250457763658,y:401.7451197218989},{x:232.40733146907718,y:412.07142208989444},{x:256.00887226912135,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:304.6911399379096,y:418.3954358873965},{x:328.2926807379537,y:412.0714220898945},{x:350.4375076293944,y:401.74511972189896},{x:370.4527612529582,y:387.73028825550034},{x:387.73028825550034,y:370.4527612529583},{x:401.7451197218989,y:350.4375076293944},{x:412.07142208989444,y:328.29268073795373},{x:418.39543588739645,y:304.6911399379098},{x:420.52500915527327,y:280.35000610351557}],name:"circle"},{points:[{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:256.00887226912135},{x:148.62859011713655,y:232.4073314690773},{x:158.95489248513206,y:210.26250457763666},{x:172.96972395153068,y:190.2472509540728},{x:190.2472509540728,y:172.96972395153068},{x:210.2625045776366,y:158.9548924851321},{x:232.40733146907726,y:148.62859011713658},{x:256.00887226912135,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:304.6911399379096,y:142.30457631963455},{x:328.29268073795373,y:148.62859011713655},{x:350.43750762939436,y:158.95489248513206},{x:370.4527612529582,y:172.96972395153068},{x:387.73028825550034,y:190.24725095407277},{x:401.74511972189896,y:210.26250457763666},{x:412.07142208989444,y:232.40733146907723},{x:418.3954358873965,y:256.0088722691214},{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:304.69113993790967},{x:412.07142208989444,y:328.29268073795373},{x:401.74511972189896,y:350.4375076293944},{x:387.73028825550034,y:370.4527612529582},{x:370.4527612529582,y:387.73028825550034},{x:350.4375076293944,y:401.7451197218989},{x:328.29268073795384,y:412.07142208989444},{x:304.69113993790967,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:256.0088722691214,y:418.3954358873965},{x:232.40733146907735,y:412.0714220898945},{x:210.2625045776366,y:401.74511972189896},{x:190.2472509540728,y:387.73028825550034},{x:172.9697239515307,y:370.4527612529583},{x:158.95489248513212,y:350.4375076293944},{x:148.62859011713655,y:328.29268073795373},{x:142.30457631963458,y:304.6911399379098},{x:140.17500305175776,y:280.35000610351557}],name:"circle"},{points:[{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:304.69113993790967},{x:148.62859011713655,y:328.29268073795373},{x:158.95489248513206,y:350.43750762939436},{x:172.96972395153068,y:370.4527612529582},{x:190.2472509540728,y:387.73028825550034},{x:210.2625045776366,y:401.74511972189896},{x:232.40733146907726,y:412.07142208989444},{x:256.00887226912135,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:304.6911399379096,y:418.3954358873965},{x:328.29268073795373,y:412.07142208989444},{x:350.43750762939436,y:401.74511972189896},{x:370.4527612529582,y:387.73028825550034},{x:387.73028825550034,y:370.4527612529582},{x:401.74511972189896,y:350.43750762939436},{x:412.07142208989444,y:328.2926807379538},{x:418.3954358873965,y:304.6911399379096},{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:256.00887226912135},{x:412.07142208989444,y:232.4073314690773},{x:401.74511972189896,y:210.2625045776366},{x:387.73028825550034,y:190.2472509540728},{x:370.4527612529582,y:172.9697239515307},{x:350.4375076293944,y:158.95489248513212},{x:328.29268073795384,y:148.62859011713658},{x:304.69113993790967,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:256.0088722691214,y:142.30457631963455},{x:232.40733146907735,y:148.62859011713653},{x:210.2625045776366,y:158.9548924851321},{x:190.2472509540728,y:172.96972395153068},{x:172.9697239515307,y:190.24725095407274},{x:158.95489248513212,y:210.26250457763658},{x:148.62859011713655,y:232.4073314690773},{x:142.30457631963458,y:256.00887226912124},{x:140.17500305175776,y:280.35000610351545}],name:"circle"},{points:[{x:280.3500061035155,y:420.52500915527327},{x:304.6911399379096,y:418.3954358873965},{x:328.29268073795373,y:412.07142208989444},{x:350.43750762939436,y:401.74511972189896},{x:370.4527612529582,y:387.73028825550034},{x:387.73028825550034,y:370.4527612529582},{x:401.74511972189896,y:350.43750762939436},{x:412.07142208989444,y:328.2926807379538},{x:418.3954358873965,y:304.6911399379096},{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:256.00887226912135},{x:412.07142208989444,y:232.4073314690773},{x:401.74511972189896,y:210.2625045776366},{x:387.73028825550034,y:190.2472509540728},{x:370.4527612529582,y:172.9697239515307},{x:350.4375076293944,y:158.95489248513212},{x:328.29268073795384,y:148.62859011713658},{x:304.69113993790967,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:256.0088722691214,y:142.30457631963455},{x:232.40733146907735,y:148.62859011713653},{x:210.2625045776366,y:158.9548924851321},{x:190.2472509540728,y:172.96972395153068},{x:172.9697239515307,y:190.24725095407274},{x:158.95489248513212,y:210.26250457763658},{x:148.62859011713655,y:232.4073314690773},{x:142.30457631963458,y:256.00887226912124},{x:140.17500305175776,y:280.35000610351545},{x:142.30457631963455,y:304.6911399379096},{x:148.62859011713658,y:328.2926807379538},{x:158.954892485132,y:350.4375076293943},{x:172.96972395153068,y:370.4527612529582},{x:190.24725095407274,
y:387.7302882555003},{x:210.26250457763666,y:401.74511972189896},{x:232.40733146907718,y:412.07142208989444},{x:256.00887226912135,y:418.3954358873965},{x:280.35000610351545,y:420.52500915527327}],name:"circle"},{points:[{x:280.3500061035155,y:140.17500305175776},{x:304.6911399379096,y:142.30457631963455},{x:328.29268073795373,y:148.62859011713655},{x:350.43750762939436,y:158.95489248513206},{x:370.4527612529582,y:172.96972395153068},{x:387.73028825550034,y:190.24725095407277},{x:401.74511972189896,y:210.26250457763666},{x:412.07142208989444,y:232.40733146907723},{x:418.3954358873965,y:256.0088722691214},{x:420.52500915527327,y:280.3500061035155},{x:418.3954358873965,y:304.69113993790967},{x:412.07142208989444,y:328.29268073795373},{x:401.74511972189896,y:350.4375076293944},{x:387.73028825550034,y:370.4527612529582},{x:370.4527612529582,y:387.73028825550034},{x:350.4375076293944,y:401.7451197218989},{x:328.29268073795384,y:412.07142208989444},{x:304.69113993790967,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:256.0088722691214,y:418.3954358873965},{x:232.40733146907735,y:412.0714220898945},{x:210.2625045776366,y:401.74511972189896},{x:190.2472509540728,y:387.73028825550034},{x:172.9697239515307,y:370.4527612529583},{x:158.95489248513212,y:350.4375076293944},{x:148.62859011713655,y:328.29268073795373},{x:142.30457631963458,y:304.6911399379098},{x:140.17500305175776,y:280.35000610351557},{x:142.30457631963455,y:256.0088722691214},{x:148.62859011713658,y:232.40733146907723},{x:158.954892485132,y:210.26250457763672},{x:172.96972395153068,y:190.2472509540728},{x:190.24725095407274,y:172.96972395153074},{x:210.26250457763666,y:158.95489248513206},{x:232.40733146907718,y:148.6285901171366},{x:256.00887226912135,y:142.30457631963455},{x:280.35000610351545,y:140.17500305175776}],name:"circle"},{points:[{x:280.3500061035155,y:140.17500305175776},{x:256.0088722691214,y:142.30457631963455},{x:232.4073314690773,y:148.62859011713655},{x:210.26250457763666,y:158.95489248513206},{x:190.2472509540728,y:172.96972395153068},{x:172.9697239515307,y:190.24725095407277},{x:158.95489248513206,y:210.26250457763666},{x:148.62859011713658,y:232.40733146907723},{x:142.30457631963455,y:256.0088722691214},{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:304.69113993790967},{x:148.62859011713655,y:328.29268073795373},{x:158.9548924851321,y:350.4375076293944},{x:172.96972395153068,y:370.4527612529582},{x:190.24725095407277,y:387.73028825550034},{x:210.26250457763658,y:401.7451197218989},{x:232.40733146907718,y:412.07142208989444},{x:256.00887226912135,y:418.3954358873965},{x:280.3500061035155,y:420.52500915527327},{x:304.6911399379096,y:418.3954358873965},{x:328.2926807379537,y:412.0714220898945},{x:350.4375076293944,y:401.74511972189896},{x:370.4527612529582,y:387.73028825550034},{x:387.73028825550034,y:370.4527612529583},{x:401.7451197218989,y:350.4375076293944},{x:412.07142208989444,y:328.29268073795373},{x:418.39543588739645,y:304.6911399379098},{x:420.52500915527327,y:280.35000610351557},{x:418.3954358873965,y:256.0088722691214},{x:412.07142208989444,y:232.40733146907723},{x:401.745119721899,y:210.26250457763672},{x:387.73028825550034,y:190.2472509540728},{x:370.4527612529583,y:172.96972395153074},{x:350.43750762939436,y:158.95489248513206},{x:328.29268073795384,y:148.6285901171366},{x:304.69113993790967,y:142.30457631963455},{x:280.35000610351557,y:140.17500305175776}],name:"circle"},{points:[{x:280.3500061035155,y:420.52500915527327},{x:256.0088722691214,y:418.3954358873965},{x:232.4073314690773,y:412.07142208989444},{x:210.26250457763666,y:401.74511972189896},{x:190.2472509540728,y:387.73028825550034},{x:172.9697239515307,y:370.4527612529582},{x:158.95489248513206,y:350.43750762939436},{x:148.62859011713658,y:328.2926807379538},{x:142.30457631963455,y:304.6911399379096},{x:140.17500305175776,y:280.3500061035155},{x:142.30457631963455,y:256.00887226912135},{x:148.62859011713655,y:232.4073314690773},{x:158.9548924851321,y:210.2625045776366},{x:172.96972395153068,y:190.2472509540728},{x:190.24725095407277,y:172.9697239515307},{x:210.26250457763658,y:158.95489248513212},{x:232.40733146907718,y:148.62859011713658},{x:256.00887226912135,y:142.30457631963455},{x:280.3500061035155,y:140.17500305175776},{x:304.6911399379096,y:142.30457631963455},{x:328.2926807379537,y:148.62859011713653},{x:350.4375076293944,y:158.9548924851321},{x:370.4527612529582,y:172.96972395153068},{x:387.73028825550034,y:190.24725095407274},{x:401.7451197218989,y:210.26250457763658},{x:412.07142208989444,y:232.4073314690773},{x:418.39543588739645,y:256.00887226912124},{x:420.52500915527327,y:280.35000610351545},{x:418.3954358873965,y:304.6911399379096},{x:412.07142208989444,y:328.2926807379538},{x:401.745119721899,y:350.4375076293943},{x:387.73028825550034,y:370.4527612529582},{x:370.4527612529583,y:387.7302882555003},{x:350.43750762939436,y:401.74511972189896},{x:328.29268073795384,y:412.07142208989444},{x:304.69113993790967,y:418.3954358873965},{x:280.35000610351557,y:420.52500915527327}],name:"circle"}],e.prototype.spot=function(x,y){null==y&&(y="");for(var e,n,i,o=new t(x),s=+(1/0),r=null,h=0,u=0;u<this.patterns.length;u++)n=this.patterns[u],n.name.indexOf(y)>-1&&(e=o.distanceAtBestAngle(n),i=1-e/a,e<s&&i>this.threshold&&(s=e,r=n.name,h=i));return{pattern:r,score:h}},e.prototype.learn=function(x,y){return this.patterns.push(new t(y,x))},e}Object.defineProperty(y,"__esModule",{value:!0}),y.default=t},function(x,y){"use strict";function t(x,y){function t(x){x.target.addEventListener("mouseup",n),x.target.addEventListener("mousemove",s)}function e(x){x.target.removeEventListener("mouseup",n),x.target.removeEventListener("mousemove",s)}function n(x){e(x);var y=a.getPathData(f);null!==y.shape?i(y):o(c),f=[]}function i(y){var t=h.filter(function(x){return x.shape===y.shape}).length;d[y.shape]&&d[y.shape]>t&&h.push(y);var e=a.checkResults(h,d);o(c,e),e&&(r.removeChild(u),u=null,clearTimeout(l),x())}function o(x,y){a.drawTaskText(x,m),x.fillStyle=a.options.bgColor,x.fillRect(0,a.sizes.explanation.height,u.width,u.height),h.length&&(x.lineWidth=y?a.options.successLineWidth:a.options.drawLineWidth,h.forEach(function(y){a.drawDots(x,y.dots,a.options.acceptColor)}))}function s(x){var y=a.getPointerPos(x);f.push(y),a.drawDots(c,f,a.options.drawColor)}var r=this.getContainer(this.options.container),a=this,h=[],u=document.createElement("canvas"),c=u.getContext("2d"),p=this.options.timeout?1e3*this.options.timeout:36e5,l=setTimeout(function(){r.removeChild(u),u=null,y("time out!")},p),f=[],d=this.getRandItemSet(this.options.items),m=this.getText(d);this.sizes=this.getSizes(r,c,m),u.width=this.sizes.width,u.height=this.sizes.height,r.appendChild(u),o(c),u.addEventListener("mousedown",t)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=t},function(x,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default={getContainer:function(x){if(!x)return document.body;var y=document.querySelector(this.options.container);return y?y:document.body},getSizes:function(x,y,t){var e=void 0,n=void 0;if(x===document.body)e=window.innerWidth-4,n=window.innerHeight-4;else{var i=x.getBoundingClientRect();e=i.width,n=i.height}for(var o=.05,s=Math.round(n*o);y.measureText(t).width>e;)o*=.95,s=Math.round(n*o),y.font=s+"px sans-serif";var r=this.options.text,a=.03,h=Math.round(n*a);if(r)for(;y.measureText(r).width>e;)a*=.95,h=Math.round(n*a),y.font=h+"px sans-serif";var u=r?Math.round(.07*n):Math.round(.1*n);return{width:e,height:n,explanation:{height:Math.round(.2*n),font1:s,font2:h,text1Y:u,text2Y:Math.round(.15*n)}}},checkResults:function(x,y){var t=x.reduce(function(x,y){return x[y.shape]-=1,x},Object.assign({},y));return Object.keys(t).every(function(x){return 0===t[x]})},drawTaskText:function(x,y){var t=this.sizes.explanation;x.fillStyle=this.options.textBgColor,x.fillRect(0,0,x.canvas.width,t.height),x.textAlign="center",x.fillStyle=this.options.textColor,x.font=t.font1+"px sans-serif",x.fillText(y,x.canvas.width/2,t.text1Y),this.options.text&&(x.font=t.font2+"px sans-serif",x.fillText(this.options.text,x.canvas.width/2,t.text2Y))},getRandItemSet:function(x){var y=["circle","triangle","square"],t=this.shuffle(y).reduce(function(y,t,e){var n=Object.keys(y).reduce(function(x,t){return x+=y[t]},0),i=x-n;return 2===e?y[t]=i:y[t]=Math.ceil(Math.random()*i),y},{});return t},getText:function(x){var y=Object.keys(x).reduce(function(y,t){return x[t]&&(y+=1===x[t]?" a "+t+",":" "+x[t]+" "+t+"s,"),y},"Please draw");return y.replace(/,$/,".").replace(/,(?=[^,]*$)/," and")},shuffle:function(x){for(var y=x.length,t=void 0;y;)t=Math.floor(Math.random()*y--),x[y]=[x[t],x[t]=x[y]][0];return x},drawDots:function(x,y,t){x.strokeStyle=t,x.beginPath(),y.forEach(function(y,t){t?x.lineTo(y.x,y.y):x.moveTo(y.x,y.y)}),x.stroke()},getPathData:function(x){var y=this.shapeDetector.spot(x),t="#"+Math.floor(16777215*Math.random()).toString(16);return{shape:y.pattern,dots:x,color:t}},getPointerPos:function(x){var y=x.target.getBoundingClientRect();return{x:x.pageX-y.left,y:x.pageY-y.top}}}}])});
//# sourceMappingURL=shapecaptcha.min.js.map
